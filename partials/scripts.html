<!-- Start scripts.html -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="../assets/js/templatemo.js"></script>
<script src="../assets/js/custom.js"></script>

<!-- ✅ Universal Partials Loader -->
<script>
(async function() {
  const includes = document.querySelectorAll("[data-include]");
  for (const el of includes) {
    const url = el.getAttribute("data-include");
    try {
      const res = await fetch(url, { cache: "no-cache" });
      const html = await res.text();
      const tmp = document.createElement("div");
      tmp.innerHTML = html;

      // Execute <script> tags inside partials
      for (const oldScript of tmp.querySelectorAll("script")) {
        const s = document.createElement("script");
        if (oldScript.src) s.src = oldScript.src;
        else s.textContent = oldScript.textContent;
        document.body.appendChild(s);
        oldScript.remove();
      }

      el.replaceWith(...tmp.childNodes);
    } catch (err) {
      console.error("❌ Include failed:", url, err);
    }
  }

  // Fire event for pages like shop.html
  document.dispatchEvent(new Event("partials:loaded"));
})();
</script>
<!-- End scripts.html -->
